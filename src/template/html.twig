<style media="screen">
    #html-editor {
        position: relative;
        height: 300px;
    }
</style>
<script>
    let textarea = document.getElementById("{{ selector|replace({'#':''}) }}")
    textarea.style.display = 'none';
    let html_editor = document.createElement("pre");
    html_editor.setAttribute('id', 'html-editor');
    textarea.after(html_editor);

    let editor = ace.edit(html_editor);
    editor.session.setMode("ace/mode/{{ options.mode ?? 'html' }}");
    editor.setOptions({
           selectionStyle: "text",
           showLineNumbers: {{options.showLineNumbers ?? 'true' }},
           showPrintMargin: {{ options.showPrintMargin ?? 'true'}},
           fontSize: {{ options.fontSize ?? '14' }},
           enableBasicAutocompletion: {{ options.enableBasicAutocompletion ?? 'false' }},
           enableLiveAutocompletion: {{ options.enableLiveAutocompletion ?? 'false' }},
    });
    editor.setValue(textarea.value);

    {%  if  options.theme %}
    editor.setTheme("ace/theme/{{ options.theme }}");
    {% endif %}

    editor.getSession().on("change", function () {
        textarea.value = editor.getValue();
    });

</script>


